<!DOCTYPE html>

<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>냥쿤OS 관리자</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

```
body {
  font-family: 'Press Start 2P', monospace;
  background: #0a0a0a;
  color: #4ade80;
  min-height: 100vh;
  image-rendering: pixelated;
  overflow-x: hidden;
}

.admin-container {
  background: 
    radial-gradient(circle at 25% 25%, rgba(74, 222, 128, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(245, 158, 11, 0.03) 0%, transparent 50%),
    repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(74, 222, 128, 0.01) 2px, rgba(74, 222, 128, 0.01) 4px);
  min-height: 100vh;
  padding: 20px;
}

.admin-header {
  background: linear-gradient(90deg, #111 0%, #1a1a1a 50%, #111 100%);
  border: 2px solid #4ade80;
  padding: 16px;
  margin-bottom: 24px;
  text-align: center;
  box-shadow: 0 0 20px rgba(74, 222, 128, 0.3), inset 0 0 20px rgba(74, 222, 128, 0.05);
}

.admin-title {
  font-size: 14px;
  color: #4ade80;
  text-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
  margin-bottom: 8px;
}

.admin-subtitle {
  font-size: 8px;
  color: rgba(74, 222, 128, 0.7);
}

.admin-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

.admin-section {
  background: rgba(0, 0, 0, 0.8);
  border: 2px solid #4ade80;
  padding: 20px;
  box-shadow: 0 0 15px rgba(74, 222, 128, 0.2), inset 0 0 15px rgba(74, 222, 128, 0.05);
}

.section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(74, 222, 128, 0.3);
}

.section-title {
  font-size: 10px;
  color: #86efac;
  text-shadow: 0 0 5px rgba(134, 239, 172, 0.3);
}

.form-group {
  margin-bottom: 16px;
}

.form-label {
  display: block;
  font-size: 7px;
  color: #4ade80;
  margin-bottom: 6px;
  text-transform: uppercase;
}

.form-input {
  width: 100%;
  background: rgba(0, 0, 0, 0.8);
  border: 2px solid #4ade80;
  color: #86efac;
  padding: 8px 12px;
  font-family: 'Press Start 2P', monospace;
  font-size: 7px;
  outline: none;
  transition: all 0.2s;
  box-shadow: 0 0 5px rgba(74, 222, 128, 0.2);
}

.form-input:focus {
  border-color: #f59e0b;
  color: #fbbf24;
  box-shadow: 0 0 10px rgba(245, 158, 11, 0.3);
}

.form-input::placeholder {
  color: rgba(74, 222, 128, 0.4);
}

.form-textarea {
  min-height: 80px;
  resize: vertical;
  line-height: 1.4;
}

.form-btn {
  background: rgba(0, 0, 0, 0.8);
  border: 2px solid #4ade80;
  color: #4ade80;
  padding: 8px 16px;
  font-size: 7px;
  cursor: pointer;
  font-family: 'Press Start 2P', monospace;
  transition: all 0.2s;
  box-shadow: 0 0 5px rgba(74, 222, 128, 0.2);
  margin-right: 8px;
  margin-bottom: 8px;
}

.form-btn:hover {
  background: #4ade80;
  color: #000000;
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(74, 222, 128, 0.4);
}

.form-btn.danger {
  border-color: #ef4444;
  color: #ef4444;
}

.form-btn.danger:hover {
  background: #ef4444;
  color: #000000;
}

.form-btn.warning {
  border-color: #f59e0b;
  color: #f59e0b;
}

.form-btn.warning:hover {
  background: #f59e0b;
  color: #000000;
}

.items-list {
  max-height: 300px;
  overflow-y: auto;
  margin-top: 16px;
}

.items-list::-webkit-scrollbar {
  width: 6px;
}

.items-list::-webkit-scrollbar-track {
  background: rgba(74, 222, 128, 0.1);
}

.items-list::-webkit-scrollbar-thumb {
  background: #4ade80;
  box-shadow: 0 0 3px rgba(74, 222, 128, 0.3);
}

.list-item {
  background: rgba(74, 222, 128, 0.05);
  border: 1px solid rgba(74, 222, 128, 0.2);
  padding: 12px;
  margin-bottom: 8px;
  transition: all 0.2s;
}

.list-item:hover {
  background: rgba(74, 222, 128, 0.1);
  border-color: rgba(74, 222, 128, 0.4);
}

.item-title {
  font-size: 8px;
  color: #86efac;
  margin-bottom: 4px;
}

.item-content {
  font-size: 6px;
  color: rgba(74, 222, 128, 0.8);
  line-height: 1.3;
  margin-bottom: 6px;
}

.item-meta {
  font-size: 5px;
  color: rgba(147, 51, 234, 0.8);
  margin-bottom: 8px;
}

.item-actions {
  display: flex;
  gap: 6px;
}

.status-indicator {
  position: fixed;
  top: 20px;
  right: 20px;
  background: rgba(0, 0, 0, 0.9);
  border: 2px solid #4ade80;
  padding: 8px 12px;
  font-size: 6px;
  color: #4ade80;
  box-shadow: 0 0 10px rgba(74, 222, 128, 0.3);
  z-index: 1000;
}

.status-indicator.success {
  border-color: #22c55e;
  color: #22c55e;
}

.status-indicator.error {
  border-color: #ef4444;
  color: #ef4444;
}

.iframe-container {
  margin-top: 16px;
  border: 2px solid rgba(74, 222, 128, 0.3);
  height: 300px;
  overflow: hidden;
}

.iframe-container iframe {
  width: 100%;
  height: 100%;
  border: none;
  background: rgba(5, 5, 5, 0.9);
}

.loading {
  text-align: center;
  color: rgba(74, 222, 128, 0.6);
  font-size: 7px;
  padding: 20px;
}

.loading-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid rgba(74, 222, 128, 0.3);
  border-top: 2px solid #4ade80;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 8px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.photo-preview {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border: 1px solid rgba(74, 222, 128, 0.3);
  margin-right: 8px;
  display: inline-block;
}

@media (max-width: 768px) {
  .admin-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .admin-container {
    padding: 10px;
  }
  
  .admin-section {
    padding: 16px;
  }
}
```

  </style>
</head>
<body>
  <div class="admin-container">
    <div class="status-indicator" id="status-indicator">시스템 준비중...</div>

```
<div class="admin-header">
  <div class="admin-title">📂 냥쿤OS 관리자 페이지</div>
  <div class="admin-subtitle">시스템 관리 및 콘텐츠 편집</div>
</div>

<div class="admin-grid">
  <div class="admin-section">
    <div class="section-header">
      <div class="section-title">📅 연애 타임라인 관리</div>
    </div>
    <form id="timeline-form">
      <div class="form-group">
        <label class="form-label">날짜</label>
        <input type="text" class="form-input" id="timeline-date" placeholder="2024.03.11" required />
      </div>
      <div class="form-group">
        <label class="form-label">제목</label>
        <input type="text" class="form-input" id="timeline-title" placeholder="첫 만남" required />
      </div>
      <div class="form-group">
        <label class="form-label">내용</label>
        <textarea class="form-input form-textarea" id="timeline-content" placeholder="특별한 순간의 이야기를 적어보세요..."></textarea>
      </div>
      <div class="form-group">
        <label class="form-label">위치</label>
        <input type="text" class="form-input" id="timeline-position" placeholder="50%" required />
      </div>
      <button type="submit" class="form-btn">추가</button>
    </form>
    <div class="items-list" id="timeline-list">
      <div class="loading">
        <div class="loading-spinner"></div>
        타임라인 로딩중...
      </div>
    </div>
  </div>

  <div class="admin-section">
    <div class="section-header">
      <div class="section-title">📸 사진 업로드</div>
    </div>
    <form id="photo-form">
      <div class="form-group">
        <label class="form-label">사진 파일</label>
        <input type="file" class="form-input" id="photo-file" accept="image/*" required />
      </div>
      <div class="form-group">
        <label class="form-label">사진 제목</label>
        <input type="text" class="form-input" id="photo-title" placeholder="우리의 추억" required />
      </div>
      <div class="form-group">
        <label class="form-label">설명</label>
        <input type="text" class="form-input" id="photo-description" placeholder="짧은 설명" />
      </div>
      <div class="form-group">
        <label class="form-label">날짜</label>
        <input type="text" class="form-input" id="photo-date" placeholder="2024.04.01" required />
      </div>
      <button type="submit" class="form-btn">사진 업로드</button>
    </form>
    <div class="items-list" id="photo-list">
      <div class="loading">
        <div class="loading-spinner"></div>
        사진 로딩중...
      </div>
    </div>
  </div>

  <div class="admin-section">
    <div class="section-header">
      <div class="section-title">🧘 오늘의 묵상 관리</div>
    </div>
    <form id="quote-form">
      <div class="form-group">
        <label class="form-label">묵상 내용</label>
        <textarea class="form-input form-textarea" id="quote-input" placeholder="마음에 와닿는 말씀을 입력하세요..." required></textarea>
      </div>
      <button type="submit" class="form-btn">어록 추가</button>
    </form>
    <div class="items-list" id="quote-list">
      <div class="loading">
        <div class="loading-spinner"></div>
        어록 로딩중...
      </div>
    </div>
  </div>

  <div class="admin-section">
    <div class="section-header">
      <div class="section-title">💌 냥쿤에게 쓰는 편지</div>
    </div>
    <form id="letter-to-form">
      <div class="form-group">
        <label class="form-label">제목</label>
        <input type="text" class="form-input" id="letter-to-title" placeholder="사랑하는 냥쿤에게" required />
      </div>
      <div class="form-group">
        <label class="form-label">내용</label>
        <textarea class="form-input form-textarea" id="letter-to-content" placeholder="냥쿤에게 전하고 싶은 마음을 써보세요..." required></textarea>
      </div>
      <button type="submit" class="form-btn">편지 작성</button>
    </form>
    <div class="items-list" id="letter-to-list">
      <div class="loading">
        <div class="loading-spinner"></div>
        편지 로딩중...
      </div>
    </div>
  </div>

  <div class="admin-section">
    <div class="section-header">
      <div class="section-title">📨 냥쿤이 나에게 쓴 편지</div>
    </div>
    <div class="iframe-container">
      <iframe id="letters-from-iframe" src=""></iframe>
    </div>
  </div>

  <div class="admin-section">
    <div class="section-header">
      <div class="section-title">🎮 앱 미리보기</div>
    </div>
    <div style="display: flex; gap: 8px; margin-bottom: 12px; flex-wrap: wrap;">
      <button class="form-btn" onclick="previewApp('chatbot')">냥GPT</button>
      <button class="form-btn" onclick="previewApp('photos')">사진첩</button>
      <button class="form-btn" onclick="previewApp('quotes')">냥쿤키우기</button>
      <button class="form-btn" onclick="previewApp('timeline')">타임라인</button>
      <button class="form-btn" onclick="previewApp('letters-from')">받은편지함</button>
      <button class="form-btn" onclick="previewApp('letters-to')">편지쓰기</button>
    </div>
    <div class="iframe-container">
      <iframe id="app-preview-iframe" src=""></iframe>
    </div>
  </div>
</div>
```

  </div>

  <script type="module">
    let db = null;
    let storage = null;
    let isConnected = false;

    const apps = {
      'chatbot': `data:text/html;charset=utf-8,${encodeURIComponent(/* 여기에 chatbot HTML */)}`,
      'photos': `data:text/html;charset=utf-8,${encodeURIComponent(/* 여기에 photos HTML */)}`,
      'quotes': `data:text/html;charset=utf-8,${encodeURIComponent(/* 여기에 quotes HTML */)}`,
      'timeline': `data:text/html;charset=utf-8,${encodeURIComponent(/* 여기에 timeline HTML */)}`,
      'letters-from': `data:text/html;charset=utf-8,${encodeURIComponent(/* 여기에 letters-from HTML */)}`,
      'letters-to': `data:text/html;charset=utf-8,${encodeURIComponent(/* 여기에 letters-to HTML */)}`,
    };

    async function initFirebase() {
      try {
        const { initializeApp } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js");
        const { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, serverTimestamp } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-storage.js");

        const firebaseConfig = {
          apiKey: "AIzaSyBDXhlzkrKOhs-ewl4IDkPL5Oi2bIv0vTg",
          authDomain: "nyangos-fdbe6.firebaseapp.com",
          projectId: "nyangos-fdbe6",
          storageBucket: "nyangos-fdbe6.appspot.com",
          messagingSenderId: "349621507711",
          appId: "1:349621507711:web:2201669ae265cfbbfad14a"
        };

        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        storage = getStorage(app);
        
        await getDocs(collection(db, 'timeline'));
        isConnected = true;
        showStatus('Firebase 연결 성공', 'success');
        console.log('Firebase 연결 성공');
        return true;
      } catch (error) {
        console.error('Firebase 연결 실패:', error);
        isConnected = false;
        showStatus('Firebase 연결 실패', 'error');
        return false;
      }
    }

    function showStatus(message, type = 'info') {
      const indicator = document.getElementById('status-indicator');
      indicator.textContent = message;
      indicator.className = `status-indicator ${type}`;
      
      setTimeout(() => {
        indicator.className = 'status-indicator';
        indicator.textContent = '시스템 준비완료';
      }, 3000);
    }

    async function loadTimeline() {
      if (!isConnected || !db) return;
      
      try {
        const { collection, getDocs } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const snapshot = await getDocs(collection(db, 'timeline'));
        const list = document.getElementById('timeline-list');
        
        if (snapshot.empty) {
          list.innerHTML = '<div class="loading">등록된 타임라인이 없습니다.</div>';
          return;
        }
        
        list.innerHTML = '';
        snapshot.forEach((docSnap) => {
          const data = docSnap.data();
          const item = document.createElement('div');
          item.className = 'list-item';
          item.innerHTML = `
            <div class="item-title">${data.date} - ${data.title}</div>
            <div class="item-content">${data.content}</div>
            <div class="item-meta">위치: ${data.position}</div>
            <div class="item-actions">
              <button class="form-btn warning" onclick="editTimeline('${docSnap.id}')">수정</button>
              <button class="form-btn danger" onclick="deleteTimeline('${docSnap.id}')">삭제</button>
            </div>
          `;
          list.appendChild(item);
        });
      } catch (error) {
        console.error('타임라인 로딩 실패:', error);
        showStatus('타임라인 로딩 실패', 'error');
      }
    }

    async function loadPhotos() {
      if (!isConnected || !db) return;
      
      try {
        const { collection, getDocs } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const snapshot = await getDocs(collection(db, 'photos'));
        const list = document.getElementById('photo-list');
        
        if (snapshot.empty) {
          list.innerHTML = '<div class="loading">등록된 사진이 없습니다.</div>';
          return;
        }
        
        list.innerHTML = '';
        snapshot.forEach((docSnap) => {
          const data = docSnap.data();
          const item = document.createElement('div');
          item.className = 'list-item';
          item.innerHTML = `
            <img src="${data.url}" class="photo-preview" alt="${data.title}">
            <div style="display: inline-block; vertical-align: top;">
              <div class="item-title">${data.title}</div>
              <div class="item-content">${data.description}</div>
              <div class="item-meta">${data.date}</div>
              <div class="item-actions">
                <button class="form-btn danger" onclick="deletePhoto('${docSnap.id}')">삭제</button>
              </div>
            </div>
          `;
          list.appendChild(item);
        });
      } catch (error) {
        console.error('사진 로딩 실패:', error);
        showStatus('사진 로딩 실패', 'error');
      }
    }

    async function loadQuotes() {
      if (!isConnected || !db) return;
      
      try {
        const { collection, getDocs } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const snapshot = await getDocs(collection(db, 'quotes'));
        const list = document.getElementById('quote-list');
        
        if (snapshot.empty) {
          list.innerHTML = '<div class="loading">등록된 어록이 없습니다.</div>';
          return;
        }
        
        list.innerHTML = '';
        snapshot.forEach((docSnap) => {
          const data = docSnap.data();
          const item = document.createElement('div');
          item.className = 'list-item';
          item.innerHTML = `
            <div class="item-content">"${data.text}"</div>
            <div class="item-actions">
              <button class="form-btn danger" onclick="deleteQuote('${docSnap.id}')">삭제</button>
            </div>
          `;
          list.appendChild(item);
        });
      } catch (error) {
        console.error('어록 로딩 실패:', error);
        showStatus('어록 로딩 실패', 'error');
      }
    }

    async function loadLettersTo() {
      if (!isConnected || !db) return;
      
      try {
        const { collection, getDocs } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const snapshot = await getDocs(collection(db, 'lettersToNyangkun'));
        const list = document.getElementById('letter-to-list');
        
        if (snapshot.empty) {
          list.innerHTML = '<div class="loading">작성된 편지가 없습니다.</div>';
          return;
        }
        
        list.innerHTML = '';
        snapshot.forEach((docSnap) => {
          const data = docSnap.data();
          const item = document.createElement('div');
          item.className = 'list-item';
          item.innerHTML = `
            <div class="item-title">${data.title}</div>
            <div class="item-content">${data.content.substring(0, 100)}...</div>
            <div class="item-meta">${data.timestamp?.toDate?.()?.toLocaleString('ko-KR') || 'No Date'}</div>
            <div class="item-actions">
              <button class="form-btn danger" onclick="deleteLetterTo('${docSnap.id}')">삭제</button>
            </div>
          `;
          list.appendChild(item);
        });
      } catch (error) {
        console.error('편지 로딩 실패:', error);
        showStatus('편지 로딩 실패', 'error');
      }
    }

    document.getElementById('timeline-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!isConnected || !db) {
        showStatus('Firebase 연결이 필요합니다', 'error');
        return;
      }
      
      try {
        const { collection, addDoc } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const data = {
          date: document.getElementById('timeline-date').value,
          title: document.getElementById('timeline-title').value,
          content: document.getElementById('timeline-content').value,
          position: document.getElementById('timeline-position').value
        };
        
        await addDoc(collection(db, 'timeline'), data);
        document.getElementById('timeline-form').reset();
        loadTimeline();
        showStatus('타임라인이 추가되었습니다', 'success');
      } catch (error) {
        console.error('타임라인 추가 실패:', error);
        showStatus('타임라인 추가 실패', 'error');
      }
    });

    document.getElementById('photo-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!isConnected || !db || !storage) {
        showStatus('Firebase 연결이 필요합니다', 'error');
        return;
      }
      
      try {
        const { collection, addDoc } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const { ref, uploadBytes, getDownloadURL } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-storage.js");
        
        const file = document.getElementById('photo-file').files[0];
        const title = document.getElementById('photo-title').value;
        const description = document.getElementById('photo-description').value;
        const date = document.getElementById('photo-date').value;

        if (!file) {
          showStatus('사진을 선택해주세요', 'error');
          return;
        }

        showStatus('사진 업로드 중...', 'info');
        
        const storageRef = ref(storage, `photos/${Date.now()}_${file.name}`);
        await uploadBytes(storageRef, file);
        const url = await getDownloadURL(storageRef);

        await addDoc(collection(db, 'photos'), { url, title, description, date });
        document.getElementById('photo-form').reset();
        loadPhotos();
        showStatus('사진이 업로드되었습니다', 'success');
      } catch (error) {
        console.error('사진 업로드 실패:', error);
        showStatus('사진 업로드 실패', 'error');
      }
    });

    document.getElementById('quote-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!isConnected || !db) {
        showStatus('Firebase 연결이 필요합니다', 'error');
        return;
      }
      
      try {
        const { collection, addDoc } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const text = document.getElementById('quote-input').value;
        if (!text) return;
        
        await addDoc(collection(db, 'quotes'), { text });
        document.getElementById('quote-form').reset();
        loadQuotes();
        showStatus('어록이 추가되었습니다', 'success');
      } catch (error) {
        console.error('어록 추가 실패:', error);
        showStatus('어록 추가 실패', 'error');
      }
    });

    document.getElementById('letter-to-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!isConnected || !db) {
        showStatus('Firebase 연결이 필요합니다', 'error');
        return;
      }
      
      try {
        const { collection, addDoc, serverTimestamp } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        const title = document.getElementById('letter-to-title').value;
        const content = document.getElementById('letter-to-content').value;
        
        await addDoc(collection(db, 'lettersToNyangkun'), { 
          title, 
          content, 
          timestamp: serverTimestamp() 
        });
        document.getElementById('letter-to-form').reset();
        loadLettersTo();
        showStatus('편지가 작성되었습니다', 'success');
      } catch (error) {
        console.error('편지 작성 실패:', error);
        showStatus('편지 작성 실패', 'error');
      }
    });

    window.deleteTimeline = async function(id) {
      if (!confirm('정말 삭제하시겠습니까?')) return;
      
      try {
        const { doc, deleteDoc } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        await deleteDoc(doc(db, 'timeline', id));
        loadTimeline();
        showStatus('타임라인이 삭제되었습니다', 'success');
      } catch (error) {
        console.error('삭제 실패:', error);
        showStatus('삭제 실패', 'error');
      }
    };

    window.deletePhoto = async function(id) {
      if (!confirm('정말 삭제하시겠습니까?')) return;
      
      try {
        const { doc, deleteDoc } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        await deleteDoc(doc(db, 'photos', id));
        loadPhotos();
        showStatus('사진이 삭제되었습니다', 'success');
      } catch (error) {
        console.error('삭제 실패:', error);
        showStatus('삭제 실패', 'error');
      }
    };

    window.deleteQuote = async function(id) {
      if (!confirm('정말 삭제하시겠습니까?')) return;
      
      try {
        const { doc, deleteDoc } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        await deleteDoc(doc(db, 'quotes', id));
        loadQuotes();
        showStatus('어록이 삭제되었습니다', 'success');
      } catch (error) {
        console.error('삭제 실패:', error);
        showStatus('삭제 실패', 'error');
      }
    };

    window.deleteLetterTo = async function(id) {
      if (!confirm('정말 삭제하시겠습니까?')) return;
      
      try {
        const { doc, deleteDoc } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");
        await deleteDoc(doc(db, 'lettersToNyangkun', id));
        loadLettersTo();
        showStatus('편지가 삭제되었습니다', 'success');
      } catch (error) {
        console.error('삭제 실패:', error);
        showStatus('삭제 실패', 'error');
      }
    };

    window.previewApp = function(appName) {
      const iframe = document.getElementById('app-preview-iframe');
      if (apps[appName]) {
        iframe.src = apps[appName];
      } else {
        showStatus(`${appName} 앱을 찾을 수 없습니다`, 'error');
      }
    };

    document.addEventListener('DOMContentLoaded', async () => {
      console.log('관리자 페이지 초기화');
      showStatus('시스템 초기화 중...', 'info');
      
      await initFirebase();
      
      if (isConnected) {
        loadTimeline();
        loadPhotos();
        loadQuotes();
        loadLettersTo();
        
        document.getElementById('letters-from-iframe').src = apps['letters-from'] || '';
      }
    });
  </script>

</body>
</html>